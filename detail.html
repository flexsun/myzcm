<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>Details</title>
		<link rel="stylesheet" href="css/iconfont.css" />
		<link rel="stylesheet" href="css/detail.css" />
		<script type="text/javascript">
			var fs=document.documentElement.clientWidth/750*100;
			document.querySelector('html').style.fontSize=fs+'px';
		</script>
	</head>
	<body>
		<header>
			<i class="iconfont icon-fanhui"></i>
			<h3>赚钱计划2465号1期</h3>
			<i class="iconfont icon-caidan"></i>
		</header>
		<section class="banner">
			<p>9.2%+0.5%</p>
			<p>9.7% (9.2%+0.5%活期利息)</p>
		</section>
		<section class="plan">
			<a href="">1000元起投</a> | <a href="">180天</a>
		</section>
		<section class="support">
			<div class="data-list">
				<div><i class="iconfont icon-zhengmian"></i><span>省级法律所法律支持</span></div>
				<div><i class="iconfont icon-zhengmian"></i><span>省级法律所法律支持</span></div>
				<div><i class="iconfont icon-zhengmian"></i><span>省级法律所法律支持</span></div>
				<div><i class="iconfont icon-zhengmian"></i><span>省级法律所法律支持</span></div>
			</div>
		</section>
		<section class="proccess">
			<div class="proccessbody">
				<div class="pro-front" data-proccess="50"></div>
				<div class="pro-block">0%</div>
			</div>
			<p class="pro-info">
				<span>已投资<em>37</em>人</span>
				<span>剩余可投<em>664444</em>元</span>
			</p>
		</section>
		<div>
			<br>站位符
				<br>站位符
					<br>站位符
												
		</div>
		<footer>
			<a href="">收益估算</a>
			<button>立即投资</button>
		</footer>
		<script src="js/zepto/zepto.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/zepto/event.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/zepto/touch.js" type="text/javascript" charset="utf-8"></script>		
		<script type="text/javascript">
			//进度条
			window.requestAnimFrame = (function(){
				  return  window.requestAnimationFrame       ||
				          window.webkitRequestAnimationFrame ||
				          window.mozRequestAnimationFrame    ||
				          function( callback ){
				            window.setTimeout(callback, 1000 / 60);
				          };
			})();
			
			window.cancelrequestAnimFrame = (function(){
				  return  window.cancelAnimationFrame   ||
				          window.webkitCancelAnimationFrame ||
				          window.mozCancelAnimationFrame    ||
				          window.clearTimeout;
				          
			})();
			$(function(){
				var value= $('.pro-front').attr('data-proccess');
				var totalwidth=$('.proccessbody').width();
				var currentvalue=0;
				var prowidth=value/100 * totalwidth;
				var pblockWidth=$('.pro-block').width();
				console.info(prowidth);
				console.info(pblockWidth);
				$('.pro-front').css('width',prowidth);
				$('.pro-block').css("left",prowidth-pblockWidth/2);
				function addNumber(){
					var step=value/30;
					currentvalue=currentvalue+step;
					currentvalue=currentvalue>value?value:currentvalue;
					$('.pro-block').html(currentvalue+"%");
					var timer=requestAnimationFrame(function(){
						
						addNumber();	
					});
					
					if(currentvalue>=value){
						cancelAnimationFrame(timer);
					}
				}
				addNumber();
				
				$('button').on({'tap':function(){
					value++;
					value=value>100?100:value;
					
					console.info(value);
					
					$('.pro-front').css('width',prowidth);
					$('.pro-block').css("left",prowidth-pblockWidth/2);
					prowidth=value/100 * totalwidth;
					addNumber();
					}
				})
			})
		</script>
	</body>
</html>
